# Authentication

At Ordercloud we have three methods to authenticate against the api.

## X-Ordercloud-Organisation

The X-Ordercloud-Organisation is a token that is generated by Ordercloud on sign-up. This needs to be sent in every request in the headers.

```code
X-Ordercloud-organisation: b72adab41439516bd186a8faaa467aaa
```

If you did not receive your token please mail support@ordercloud.com.

## Username & Password /Pin

<aside class="warning">
It is only recommended you use credentials during testing. Use [JWT tokens](auth/jwt.md#JWT tokens) in production.
</aside>


It is possible to use your username and password along with the [X-Ordercloud-Organisation](#x-ordercloud-organisation).

> Always make sure to use HTTPS when using credentials because if they are intercepted they can be used in the api and will be valid till the password/pin is reset or the user is disabled. It is therefore recommended to rather use JWT token for your app.

Use the **Authorization** header to base the [Base 64](https://en.wikipedia.org/wiki/Base64) encoded password.
<aside class="warning">
    If the wrong credentials are supplied a 401 will be returned.
    If the user does not have the required permissions a 403 will be returned.
</aside>

> To test, use this code:

```php
$curl = curl_init();

curl_setopt_array($curl, array(
  CURLOPT_URL => "https://staging-api.ordercloud.com/resource/users/logged_in",
  CURLOPT_RETURNTRANSFER => true,
  CURLOPT_ENCODING => "",
  CURLOPT_MAXREDIRS => 10,
  CURLOPT_TIMEOUT => 30,
  CURLOPT_HTTP_VERSION => CURL_HTTP_VERSION_1_1,
  CURLOPT_CUSTOMREQUEST => "GET",
  CURLOPT_HTTPHEADER => array(
    "authorization: Basic dXNlcm5hbWU6cGFzc3dvcmQ=",
    "cache-control: no-cache",
    "postman-token: c6bf155a-91d4-0456-5aa5-5d720ceacccc",
    "x-ordercloud-organisation: b72adab41439516bd186a8fc36467966"
  ),
));

$response = curl_exec($curl);
$err = curl_error($curl);

curl_close($curl);

if ($err) {
  echo "cURL Error #:" . $err;
} else {
  echo $response;
}
```

```python
import http.client

conn = http.client.HTTPSConnection("staging-api.ordercloud.com")

headers = {
    'x-ordercloud-organisation': "b72adab41439516bd186a8fc36467966",
    'authorization': "Basic dXNlcm5hbWU6cGFzc3dvcmQ=",
    'cache-control': "no-cache",
    'postman-token': "4e18e222-0c42-7be3-0eba-ae453b8698d4"
    }

conn.request("GET", "/resource/users/logged_in", headers=headers)

res = conn.getresponse()
data = res.read()

print(data.decode("utf-8"))
```

```shell
# With shell, you can just pass the correct header with each request
curl -X GET -H "X-Ordercloud-organisation: b72adab41439516bd186a8fc36467966" \
-H "Authorization: Basic dXNlcm5hbWU6cGFzc3dvcmQ=" -H "orders-hash: 1465555445455" -H "Cache-Control: no-cache" -H "Postman-Token: 0cdda378-0ac9-e674-0088-267f0a395339" "https://staging-api.ordercloud.com/resource/users/logged_in"
```

```java
OkHttpClient client = new OkHttpClient();

Request request = new Request.Builder()
  .url("https://staging-api.ordercloud.com/resource/users/logged_in")
  .get()
  .addHeader("x-ordercloud-organisation", "b72adab41439516bd186a8fc36467966")
  .addHeader("authorization", "Basic dXNlcm5hbWU6cGFzc3dvcmQ=")
  .addHeader("cache-control", "no-cache")
  .addHeader("postman-token", "29790e27-4f09-c00e-3cff-a067fcc4eba0")
  .build();

Response response = client.newCall(request).execute();
```


```ruby
require 'uri'
require 'net/http'

url = URI("https://staging-api.ordercloud.com/resource/users/logged_in")

http = Net::HTTP.new(url.host, url.port)
http.use_ssl = true
http.verify_mode = OpenSSL::SSL::VERIFY_NONE

request = Net::HTTP::Get.new(url)
request["x-ordercloud-organisation"] = 'b72adab41439516bd186a8fc36467966'
request["authorization"] = 'Basic dXNlcm5hbWU6cGFzc3dvcmQ='
request["orders-hash"] = '1465555445455'
request["cache-control"] = 'no-cache'
request["postman-token"] = '5ba2bca1-2a6c-b8a3-8003-03e49e56d229'

response = http.request(request)
puts response.read_body
```

### Pin

<aside class="warning">
    Because of the length of the pin this method is unsafe
</aside>

Along with password we support the use of pin's for authentication. This is ideal for mobile clients. But is best used in conjunction with a [JWT token](auth/jwt.md#JWT tokens). So the pin is not passed around all the time.

<aside class="notice">
    If a pin is typed in three times incorrectly. The account will be locked and a reset pin will need to be triggered.
</aside>

## Tokens

Ordercloud uses [JWT tokens](auth/jwt.md#JWT tokens) for their autentication scheme
